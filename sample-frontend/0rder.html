<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800"
    />
    <title>Order Confirmation</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
      .order-item {
        transition: all 0.3s ease;
      }
      .order-item:hover {
        transform: translateY(-2px);
      }
      .success-animation {
        animation: scaleIn 0.5s ease-out;
      }
      @keyframes scaleIn {
        0% {
          transform: scale(0.8) translateY(20px);
          opacity: 0;
        }
        100% {
          transform: scale(1) translateY(0);
          opacity: 1;
        }
      }
      .fade-in {
        animation: fadeIn 0.5s ease-out;
        animation-fill-mode: both;
      }
      @keyframes fadeIn {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .slide-in {
        opacity: 0;
        animation: slideIn 0.5s ease-out forwards;
      }
      @keyframes slideIn {
        0% {
          opacity: 0;
          transform: translateX(-20px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }
      @media print {
        .no-print {
          display: none !important;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div
      class="min-h-screen max-w-2xl mx-auto bg-white shadow-sm"
      style="font-family: 'Plus Jakarta Sans', sans-serif"
    >
      <div class="bg-white">
        <!-- Header -->
        <div
          class="flex items-center p-4 pb-2 justify-between border-b border-gray-100 no-print"
        >
          <button
            class="p-2 hover:bg-gray-100 rounded-full transition-colors"
            onclick="window.location.href='index.html'"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 19l-7-7m0 0l7-7m-7 7h18"
              />
            </svg>
          </button>
          <h1 class="text-xl font-bold text-gray-900">Order Confirmation</h1>
          <div class="w-10"></div>
        </div>

        <!-- Success Message -->
        <div class="px-6 py-8 space-y-4 text-center success-animation">
          <div
            class="w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-10 h-10 text-green-500"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M5 13l4 4L19 7"
              />
            </svg>
          </div>
          <h2 class="text-3xl font-bold text-gray-900">Order Placed!</h2>
          <p class="text-gray-600 text-base leading-relaxed max-w-sm mx-auto">
            Thank you for your order! We'll notify you once it's ready.
          </p>
        </div>

        <!-- Order Details -->
        <div id="order-details" class="px-6 space-y-8">
          <!-- Order Info -->
          <section class="space-y-4 fade-in" style="animation-delay: 0.2s">
            <h3 class="text-lg font-bold text-gray-900">Order Information</h3>
            <div class="bg-gray-50 rounded-xl p-4 space-y-3">
              <div class="grid grid-cols-2 gap-2">
                <p class="text-gray-600">Order Number</p>
                <p
                  id="order-id"
                  class="text-gray-900 font-medium text-right"
                ></p>
              </div>
              <div class="grid grid-cols-2 gap-2">
                <p class="text-gray-600">Order Date</p>
                <p
                  id="order-date"
                  class="text-gray-900 font-medium text-right"
                ></p>
              </div>
              <div class="grid grid-cols-2 gap-2">
                <p class="text-gray-600">Delivery To</p>
                <p
                  id="delivery-address"
                  class="text-gray-900 font-medium text-right"
                ></p>
              </div>
              <div class="grid grid-cols-2 gap-2">
                <p class="text-gray-600">Contact</p>
                <p
                  id="contact-info"
                  class="text-gray-900 font-medium text-right"
                ></p>
              </div>
              <div class="grid grid-cols-2 gap-2">
                <p class="text-gray-600">Payment Method</p>
                <p
                  id="payment-method"
                  class="text-gray-900 font-medium text-right"
                ></p>
              </div>
            </div>
          </section>

          <!-- Order Items -->
          <section class="space-y-4 fade-in" style="animation-delay: 0.3s">
            <h3 class="text-lg font-bold text-gray-900">Order Items</h3>
            <div id="order-items" class="space-y-3">
              <!-- Order items will be dynamically inserted here -->
            </div>
          </section>

          <!-- Order Total -->
          <section class="space-y-4 fade-in" style="animation-delay: 0.4s">
            <h3 class="text-lg font-bold text-gray-900">Order Total</h3>
            <div class="bg-gray-50 rounded-xl p-4 space-y-3">
              <div class="flex justify-between">
                <span class="text-gray-600">Subtotal</span>
                <span id="subtotal" class="font-medium text-gray-900"
                  >₹0.00</span
                >
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Tax (5%)</span>
                <span id="tax" class="font-medium text-gray-900">₹0.00</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Delivery Fee</span>
                <span class="font-medium text-green-600">Free</span>
              </div>
              <div class="h-px bg-gray-200 my-2"></div>
              <div class="flex justify-between">
                <span class="font-medium text-gray-900">Total</span>
                <span id="total" class="font-bold text-gray-900">₹0.00</span>
              </div>
            </div>
          </section>

          <!-- Notes -->
          <section
            id="notes-section"
            class="space-y-4 fade-in hidden"
            style="animation-delay: 0.5s"
          >
            <h3 class="text-lg font-bold text-gray-900">
              Delivery Instructions
            </h3>
            <div class="bg-gray-50 rounded-xl p-4">
              <p id="delivery-notes" class="text-gray-600"></p>
            </div>
          </section>
        </div>
      </div>

      <!-- Sticky Footer -->
      <div
        class="sticky bottom-0 bg-white border-t border-gray-100 mt-8 no-print fade-in"
        style="animation-delay: 0.6s"
      >
        <div class="max-w-2xl mx-auto p-4">
          <div class="flex flex-col gap-3">
            <button
              onclick="window.location.href='index.html'"
              class="w-full bg-blue-600 text-white font-bold py-4 px-6 rounded-xl hover:bg-blue-700 transition-all duration-200 hover:shadow-lg"
            >
              Continue Shopping
            </button>
            <button
              onclick="downloadReceipt()"
              class="w-full bg-gray-100 text-gray-700 font-bold py-4 px-6 rounded-xl hover:bg-gray-200 transition-all duration-200"
            >
              Download Receipt
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Get order details from localStorage
      const confirmedOrder = JSON.parse(localStorage.getItem("confirmedOrder"));

      if (!confirmedOrder) {
        window.location.href = "index.html";
      }

      function formatDate(dateString) {
        return new Date(dateString).toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        });
      }

      function updateOrderDisplay() {
        // Update order information
        document.getElementById("order-id").textContent =
          confirmedOrder.orderId;
        document.getElementById("order-date").textContent = formatDate(
          confirmedOrder.orderDate
        );
        document.getElementById("delivery-address").textContent =
          confirmedOrder.customerDetails.address;
        document.getElementById("contact-info").textContent =
          confirmedOrder.customerDetails.phone;
        document.getElementById("payment-method").textContent =
          confirmedOrder.paymentMethod === "cash"
            ? "Cash on Delivery"
            : "Credit Card";

        // Update order items
        const orderItemsContainer = document.getElementById("order-items");
        orderItemsContainer.innerHTML = "";

        confirmedOrder.items.forEach((item) => {
          const itemElement = document.createElement("div");
          itemElement.className =
            "order-item flex items-center gap-4 bg-gray-50 p-4 rounded-xl";
          itemElement.innerHTML = `
            <div class="relative bg-white rounded-lg w-16 h-16 p-2 shadow-sm">
              <img src="${item.image}" alt="${
            item.name
          }" class="w-full h-full object-contain" loading="lazy">
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-gray-900">${item.name}</p>
              <p class="text-sm text-gray-500">${
                item.quantity
              } × ₹${item.price.toFixed(2)}</p>
            </div>
            <p class="font-medium text-gray-900">₹${(
              item.price * item.quantity
            ).toFixed(2)}</p>
          `;
          orderItemsContainer.appendChild(itemElement);
        });

        // Update totals
        document.getElementById(
          "subtotal"
        ).textContent = `₹${confirmedOrder.subtotal.toFixed(2)}`;
        document.getElementById(
          "tax"
        ).textContent = `₹${confirmedOrder.tax.toFixed(2)}`;
        document.getElementById(
          "total"
        ).textContent = `₹${confirmedOrder.total.toFixed(2)}`;

        // Show notes if they exist
        if (confirmedOrder.customerDetails.notes) {
          document.getElementById("notes-section").classList.remove("hidden");
          document.getElementById("delivery-notes").textContent =
            confirmedOrder.customerDetails.notes;
        }
      }

      function downloadReceipt() {
        const printTitle = document.title;
        document.title = `Receipt-${confirmedOrder.orderId}`;
        window.print();
        document.title = printTitle;
      }

      // Initialize the display
      updateOrderDisplay();

      // Add keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          window.location.href = "index.html";
        } else if (e.key === "p" && (e.ctrlKey || e.metaKey)) {
          e.preventDefault();
          downloadReceipt();
        }
      });
    </script>
  </body>
</html>
